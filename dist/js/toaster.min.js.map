{"version":3,"file":"toaster.min.js","sources":["../../../src/ts/toaster.ts"],"sourcesContent":["/*!\r\n * Toaster v2.0.1\r\n *\r\n * Kopimi 2023 Joshua Faulkenberry\r\n * Unlicensed under The Unlicense\r\n * http://unlicense.org/\r\n */\r\n\r\nimport \"../scss/toaster.scss\"\r\n\r\nexport default class Toaster {\r\n\r\n   static version     : string = \"2.0.1\"\r\n   static toastQueue  : {\r\n                           t: HTMLElement,\r\n                           o: any\r\n                        }[] = []\r\n   static currentToast: HTMLElement | null\r\n\r\n   el: HTMLDivElement\r\n   options: opts\r\n\r\n   constructor(msg: string, options: opts) {\r\n      this.el = document.createElement(\"div\")\r\n\r\n      this.options = {\r\n         ...{\r\n            timeout: 2500,\r\n            class: \"\",\r\n            duration: 1000,\r\n            anchor: \"bottom\",\r\n            icon: null,\r\n            click: null\r\n         }, ...options\r\n      }\r\n\r\n      var ico = this.options.icon ? `<div class=\"icon\"><i class=\"${this.options.icon}\"></i></div>` : \"\"\r\n\r\n      this.el.className = `toaster ${this.options[\"class\"]}`\r\n      this.el.innerHTML = `${ico}<div class=\"body\">${msg}</div>`\r\n\r\n      this.el.addEventListener(\"eat\", () => {\r\n         this.el.style.opacity = `1`;\r\n\r\n         (() => {\r\n            this.el.style.transition = `opacity ${this.options.duration}ms`\r\n            this.el.style.opacity = `0`\r\n            this.el.addEventListener(\"transitionend\", () => {\r\n               this.el.style.display = \"none\"\r\n               this.el.dispatchEvent(new Event('eaten'))\r\n               this.el.remove()\r\n\r\n               let x = document.querySelectorAll(\"div.toaster\").length\r\n               Array.from(document.querySelectorAll(\"div.toaster\")).forEach((tst: HTMLDivElement | any) => {\r\n                  x--\r\n                  tst.style[this.options.anchor] = (x * (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop))) + \"px\"\r\n               })\r\n\r\n               this.swallow()\r\n            })\r\n         })()\r\n      })\r\n\r\n      if (this.options.click) {\r\n         this.el.style.cursor = \"pointer\"\r\n         this.el.addEventListener(\"click\", e => {\r\n            if (this.options.click) this.options.click(e)\r\n            this.el.dispatchEvent(new Event('eat'))\r\n         })\r\n      }\r\n\r\n      Toaster.toastQueue.push({\r\n         t: this.el,\r\n         o: this.options\r\n      });\r\n\r\n      (() => this.el.dispatchEvent(new Event('bake')))()\r\n\r\n      if (Toaster.toastQueue.length == 1) (() => Toaster.serve())()\r\n   }\r\n\r\n   eat() {\r\n      this.el.dispatchEvent(new Event('eat'))\r\n   }\r\n\r\n   swallow() {\r\n      this.el.remove()\r\n      Toaster.currentToast = null\r\n   }\r\n\r\n   static serve() {\r\n      if (!this.toastQueue.length) return\r\n      var tst = this.toastQueue[0].t\r\n      var options = this.toastQueue[0].o\r\n\r\n      document.body.appendChild(tst)\r\n      tst.style[options.anchor] = 0 - (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop)) + \"px\"\r\n      tst.style.clipPath = `inset(0 0 ` + (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop)) + `px)`;\r\n\r\n      (() => {\r\n         tst.style.transition = `clip-path ${options.duration}ms, ${options.anchor} ${options.duration}ms`\r\n         tst.style.clipPath = \"inset(0)\"\r\n         let x = document.querySelectorAll(\"div.toaster\").length\r\n\r\n         Array.from(document.querySelectorAll(\"div.toaster\")).forEach((el: HTMLDivElement | any) => {\r\n            x--\r\n            el.style[options.anchor] = ((x * (el.offsetHeight + parseInt(getComputedStyle(el).marginBottom) + parseInt(getComputedStyle(el).marginTop)))) + \"px\"\r\n         })\r\n      })()\r\n\r\n      this.currentToast = tst\r\n\r\n      this.currentToast?.dispatchEvent(new Event('baked'))\r\n\r\n      const next = (event: any) => {\r\n         if (event.propertyName != options.anchor) return\r\n         if (options.timeout) setTimeout(() => {\r\n            tst?.dispatchEvent(new Event('eat'))\r\n         }, options.timeout)\r\n\r\n         this.toastQueue.shift()\r\n         event.target.removeEventListener('transitionend', next, false)\r\n         event.target.dispatchEvent(new Event('served'))\r\n         if (this.toastQueue.length) this.serve()\r\n      }\r\n\r\n      this.currentToast?.addEventListener('transitionend', next)\r\n   }\r\n\r\n}"],"names":["Toaster","constructor","msg","options","this","el","document","createElement","Object","assign","timeout","class","duration","anchor","icon","click","ico","className","innerHTML","addEventListener","style","opacity","transition","display","dispatchEvent","Event","remove","x","querySelectorAll","length","Array","from","forEach","tst","offsetHeight","parseInt","getComputedStyle","marginBottom","marginTop","swallow","cursor","e","toastQueue","push","t","o","serve","eat","currentToast","static","body","appendChild","clipPath","_a","next","event","propertyName","setTimeout","shift","target","removeEventListener","_b","version"],"mappings":"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"}