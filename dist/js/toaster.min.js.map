{"version":3,"file":"toaster.min.js","sources":["../../../../src/ts/toaster.ts"],"sourcesContent":["/*!\r\n * Toaster v2.1.4\r\n *\r\n * Kopimi 2025 Joshua Faulkenberry\r\n * Unlicensed under The Unlicense\r\n * http://unlicense.org/\r\n */\r\n\r\nimport type from \"../../toaster\"\r\n\r\nexport default class Toaster implements ToasterInstance {\r\n\r\n   readonly version = \"2.1.4\";\r\n   static toastQueue: { t: HTMLElement; o: Options }[] = []\r\n   static currentToast: HTMLElement | null = null\r\n\r\n   el = document.createElement(\"div\")\r\n   options\r\n\r\n   constructor(msg: string, options?: Partial<Options>) {\r\n      this.options = {\r\n         ...{\r\n            timeout: 2500,\r\n            class: \"\",\r\n            duration: 1000,\r\n            anchor: \"bottom\",\r\n            icon: null,\r\n            click: null\r\n         }, ...options\r\n      }\r\n\r\n      var ico = this.options.icon ? `<div class=\"icon\"><i class=\"${this.options.icon}\"></i></div>` : \"\"\r\n\r\n      this.el.className = `toaster ${this.options[\"class\"]}`\r\n      this.el.innerHTML = `${ico}<div class=\"body\">${msg}</div>`\r\n\r\n      this.el.addEventListener(\"eat\", () => {\r\n         this.el.style.opacity = `1`;\r\n\r\n         (() => {\r\n            this.el.style.transition = `opacity ${this.options.duration}ms`\r\n            this.el.style.opacity = `0`\r\n            this.el.addEventListener(\"transitionend\", () => {\r\n               this.el.style.display = \"none\"\r\n               this.el.dispatchEvent(new Event('eaten'))\r\n               this.el.remove()\r\n\r\n               let x = document.querySelectorAll(\"div.toaster\").length\r\n               Array.from(document.querySelectorAll(\"div.toaster\")).forEach((tst: HTMLDivElement | any) => {\r\n                  x--\r\n                  tst.style[(this.options.anchor as string)] = (x * (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop))) + \"px\"\r\n               })\r\n\r\n               this.swallow()\r\n            })\r\n         })()\r\n      })\r\n\r\n      if (this.options.click) {\r\n         this.el.style.cursor = \"pointer\"\r\n         this.el.addEventListener(\"click\", e => {\r\n            if (this.options.click) this.options.click(e)\r\n            this.el.dispatchEvent(new Event('eat'))\r\n         })\r\n      }\r\n\r\n      Toaster.toastQueue.push({\r\n         t: this.el,\r\n         o: this.options\r\n      });\r\n\r\n      (() => this.el.dispatchEvent(new Event('bake')))()\r\n\r\n      if (Toaster.toastQueue.length == 1) (() => Toaster.serve())()\r\n   }\r\n\r\n   eat() {\r\n      this.el.dispatchEvent(new Event('eat'))\r\n   }\r\n\r\n   swallow() {\r\n      this.el.remove()\r\n      Toaster.currentToast = null\r\n   }\r\n\r\n   static serve() {\r\n      if (!Toaster.toastQueue.length) return\r\n      var tst = Toaster.toastQueue[0].t\r\n      var options = Toaster.toastQueue[0].o\r\n\r\n      document.body.appendChild(tst)\r\n      tst.style[(options.anchor as any)] = 0 - (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop)) + \"px\"\r\n      tst.style.clipPath = `inset(0 0 ` + (tst.offsetHeight + parseInt(getComputedStyle(tst).marginBottom) + parseInt(getComputedStyle(tst).marginTop)) + `px)`;\r\n\r\n      (() => {\r\n         tst.style.transition = `clip-path ${options.duration}ms, ${options.anchor} ${options.duration}ms`\r\n         tst.style.clipPath = \"inset(-100%)\"\r\n         let x = document.querySelectorAll(\"div.toaster\").length\r\n\r\n         Array.from(document.querySelectorAll(\"div.toaster\")).forEach((el: HTMLDivElement | any) => {\r\n            x--\r\n            el.style[(options.anchor as any)] = ((x * (el.offsetHeight + parseInt(getComputedStyle(el).marginBottom) + parseInt(getComputedStyle(el).marginTop)))) + \"px\"\r\n         })\r\n      })()\r\n\r\n      Toaster.currentToast = tst\r\n\r\n      Toaster.currentToast?.dispatchEvent(new Event('baked'))\r\n\r\n      const next = (event: any) => {\r\n         if (event.propertyName != options.anchor) return\r\n         if (options.timeout) setTimeout(() => {\r\n            tst?.dispatchEvent(new Event('eat'))\r\n         }, options.timeout)\r\n\r\n         Toaster.toastQueue.shift()\r\n         event.target.removeEventListener('transitionend', next, false)\r\n         event.target.dispatchEvent(new Event('served'))\r\n         if (Toaster.toastQueue.length) this.serve()\r\n      }\r\n\r\n      Toaster.currentToast?.addEventListener('transitionend', next)\r\n   }\r\n\r\n}"],"names":["Toaster","constructor","msg","options","this","version","el","document","createElement","Object","assign","timeout","class","duration","anchor","icon","click","ico","className","innerHTML","addEventListener","style","opacity","transition","display","dispatchEvent","Event","remove","x","querySelectorAll","length","Array","from","forEach","tst","offsetHeight","parseInt","getComputedStyle","marginBottom","marginTop","swallow","cursor","e","toastQueue","push","t","o","serve","eat","currentToast","body","appendChild","clipPath","_a","next","event","propertyName","setTimeout","shift","target","removeEventListener","_b"],"mappings":"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"}